<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VibeXXX - Pro Videos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: #111; /* Dark background */
            color: #fff; /* White text */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            width: 100%;
            background-color: #1a1a1a;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            padding: 30px;
            margin-top: 20px;
        }
        h1 {
            font-size: 2.8rem;
            font-weight: 800;
            color: #ff3366;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 15px rgba(255, 51, 102, 0.7);
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }
        .video-card {
            background-color: #2a2a2a;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            text-align: left;
        }
        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 51, 102, 0.3);
        }
        .video-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-bottom: 2px solid #ff3366;
        }
        .video-card-content {
            padding: 15px;
        }
        .video-card h3 {
            font-size: 1.5em;
            font-weight: 700;
            color: #ff3366;
            margin-bottom: 5px;
        }
        .video-card p {
            font-size: 0.9em;
            color: #ccc;
            margin-bottom: 10px;
        }
        .access-denied {
            background-color: #330000;
            border: 2px solid #f44336;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-top: 50px;
            box-shadow: 0 0 20px rgba(244, 67, 54, 0.5);
            max-width: 500px;
            width: 90%;
        }
        .access-denied h2 {
            color: #f44336;
            font-size: 2.5em;
            margin-bottom: 20px;
            font-weight: 800;
        }
        .access-denied p {
            font-size: 1.2em;
            color: #ddd;
            margin-bottom: 30px;
        }
        .access-denied a {
            display: inline-block;
            background-color: #ff3366;
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        .access-denied a:hover {
            background-color: #e6005c;
        }
        .verifying-access {
            text-align: center;
            margin-top: 100px;
            font-size: 1.8em;
            color: #ff3366;
            font-weight: 600;
        }
        .verifying-access .spinner {
            border: 8px solid rgba(255, 51, 102, 0.2);
            border-top: 8px solid #ff3366;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .logout-button {
            background-color: #666;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: 600;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        .logout-button:hover {
            background-color: #555;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="pageTitle">Exclusive Pro Videos</h1>

        <!-- Content for Pro Users -->
        <div id="proContent" class="hidden">
            <div class="video-grid" id="videoGrid">
                <!-- Video cards will be dynamically inserted here by JavaScript -->
            </div>
        </div>

        <!-- Content for Non-Pro Users -->
        <div id="accessDenied" class="hidden access-denied">
            <h2>Access Denied!</h2>
            <p>This content is exclusive to Pro Members. Become a Pro Member to unlock all videos and features!</p>
            <a href="membership.html">Become a Pro Now!</a>
        </div>

        <!-- Verifying Access Message -->
        <div id="verifyingAccess" class="verifying-access">
            <div class="spinner"></div>
            <p>Verifying Access...</p>
            <p class="text-sm text-gray-400">Please wait while we confirm your Pro Membership.</p>
        </div>

        <button id="logoutButton" class="logout-button hidden">Logout</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // Firebase Configuration (same as your other client-side files)
        const firebaseConfig = {
            apiKey: "AIzaSyCc9N4rRu5-pjvOPDq78FUzQ2Bh2fuHyQ8",
            authDomain: "vibexxx-500c6.firebaseapp.com",
            projectId: "vibexxx-500c6",
            storageBucket: "vibexxx-500c6.firebasestorage.app",
            messagingSenderId: "880697212397",
            appId: "1:880697212397:web:b47c4b1d1dadcb6e5bbbe4"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();

        // UI Elements
        const proContent = document.getElementById('proContent');
        const accessDenied = document.getElementById('accessDenied');
        const verifyingAccess = document.getElementById('verifyingAccess');
        const logoutButton = document.getElementById('logoutButton');
        const pageTitle = document.getElementById('pageTitle');
        const videoGrid = document.getElementById('videoGrid');

        // --- Video Data (All your Pro Videos) ---
        const videoData = {
            "video_nier_automata": {
                title: "ðŸ¤– 2B's Wild Ride: Nier Automata Housemaid Unleashed! ðŸ’¥",
                description: "Witness 2B like never before! Intense fuckmachine action with BBC creampie.",
                externalUrl: "https://www.animehentaivideos.xxx/v/54234/housemaid-2b-from-nier-automata",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/MAID.png"
            },
            "video_anime_big_ass": {
                title: "ðŸ‘ Anime Babe's Thigh-High Cum Beg! ðŸ’¦",
                description: "A busty anime girl begs for a massive cumshot on her thighs. Uncensored action!",
                externalUrl: "https://www.animehentaivideos.xxx/v/49116/anime-girl-with-big-ass-begs-for",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_32.png"
            },
            "video_dva_bbc": {
                title: "ðŸ¥› D.Va's Creamy Night: Milk This 12-Inch BBC! ðŸ†",
                description: "Overwatch's D.Va gets wild with a massive BBC. Prepare for intense action!",
                externalUrl: "https://www.animehentaivideos.xxx/v/34807/dva-wanna-milk-this-12-inch-bbc",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_599.png"
            },
            "video_stepmom_milky": {
                title: "ðŸ¼ Stepmom's Milky Tits: Can't Get Enough! ðŸ¤¤",
                description: "Obsessed with stepmom's huge, milky tits. A forbidden fantasy come true.",
                externalUrl: "https://www.animehentaivideos.xxx/v/82878/i-cant-get-enough-of-my-stepmoms",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_1366068.png"
            },
            "video_stepsister_gangbang": {
                title: "ðŸ˜ˆ Naughty Stepsister: Dominated by Three Hung Studs! â›“ï¸",
                description: "A shy stepsister gets a rough gangbang from three hung studs. Uncensored hentai!",
                externalUrl: "https://www.animehentaivideos.xxx/v/98463/naughty-stepsister-dominated-and",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_53452.png"
            },
            "video_party_bang": {
                title: "ðŸ¤« Secret Party Bang: Don't Tell Your Girlfriend! ðŸŽ‰",
                description: "A wild party night leads to an unforgettable, rough bang. Keep it a secret!",
                externalUrl: "https://www.animehentaivideos.xxx/v/84310/dont-tell-your-girlfriend-about",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_265460.png"
            },
            "video_step_siblings_busted": {
                title: "ðŸš¨ Busted! Step Siblings Caught in Uncensored Hentai! ðŸ˜±",
                description: "A shocking discovery as step-siblings are caught in the act by their aunt.",
                externalUrl: "https://www.animehentaivideos.xxx/v/32090/step-siblings-busted-banging-by",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_45251.png"
            },
            "video_lewdfroggo_licking": {
                title: "ðŸ‘… Rainy Day Bliss: Lewdfroggo's Hairless Babe Licking! ðŸ’¦",
                description: "Hot rainy day fun with a lewdfroggo and a hairless babe. So hot! ðŸ˜œ",
                externalUrl: "https://www.animehentaivideos.xxx/v/43087/rainy-day-fun-with-lewdfroggo",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_83406.png"
            },
            "video_busty_teen_married": {
                title: "ðŸ¤¯ Busty Teen's Secret Affair: Banging a Married Man! ðŸ¤«",
                description: "Can you believe this busty teen is having a scandalous affair? See it all!",
                externalUrl: "https://www.animehentaivideos.xxx/v/32702/hey-can-you-believe-this-busty",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_3118.png"
            },
            "video_h_cup_nurse": {
                title: "ðŸ©º Wild H-Cup Nurse: Sucks & Fucks Hard in POV! ðŸ‘",
                description: "A massive H-Cup nurse delivers intense POV action. Get ready for a wild ride!",
                externalUrl: "https://www.animehentaivideos.xxx/v/33446/wild-h-cup-nurse-babe-sucks-and",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/01.jpg"
            },
            "video_himawarigayorunisaku": {
                title: "ðŸŒ¸ Himawarigayorunisaku: Teen Takes Anal & Cock! ðŸ’¥",
                description: "Watch a teen suck big cock and take intense anal action. Her tits will shake!",
                externalUrl: "https://www.animehentaivideos.xxx/v/92366/hentai-himawarigayorunisaku-1",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/324541_sucking_hentai_anal_01.jpg"
            },
            "video_projekt_passion": {
                title: "ðŸŒŒ Projekt Passion: Dark Alien Babe's Shower Fingering! ðŸ‘½",
                description: "Experience intense lesbian fingering with a dark alien babe in a shower game novel.",
                externalUrl: "https://www.animehentaivideos.xxx/v/92366/hentai-himawarigayorunisaku-1", 
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/07.jpg"
            },
            "video_tifa_futa": {
                title: "ðŸ”¥ Tifa Futa's Wild Ride: Banging Aerith Hard! ðŸ‘",
                description: "Tifa Futa delivers wild cum action in a big ass play with Aerith. Don't miss this!",
                externalUrl: "https://www.animehentaivideos.xxx/v/92882/tifa-futa-bangs-aerith-hard-damn",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/07-1.jpg"
            },
            "video_accidental_sex": {
                title: "ðŸ’¦ Kinky Pussy Rubbing: Accidental Sex & Hot Cumshot! ðŸ˜œ",
                description: "An unexpected encounter leads to kinky pussy rubbing and a hot cumshot finish.",
                externalUrl: "https://www.animehentaivideos.xxx/v/54123/accidental-sex-from-kinky-pussy",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/09.jpg"
            },
            "video_cosplayer_stepdaughter": {
                title: "ðŸ¤¯ Banged My Sexy Cosplayer Stepdaughter! ðŸ’–",
                description: "A hot, forbidden encounter with a huge-titted cosplayer stepdaughter. So hot!",
                externalUrl: "https://www.animehentaivideos.xxx/v/82358/uhh-i-banged-my-sexy-cosplayer",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/04.jpg"
            },
            "video_stepsister_ass": {
                title: "ðŸ‘ Stepsister's Perfect Ass: Virgin Anal Attempt! ðŸ†",
                description: "A perfect ass takes a huge cock for a daring virgin anal attempt. Intense!",
                externalUrl: "https://www.animehentaivideos.xxx/v/87467/stepsisters-perfect-ass-takes",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/05.jpg"
            },
            "video_stepbrother_masturbation": {
                title: "ðŸ¤« My Stepbrother's Craving: Helping with Masturbation! ðŸ˜ˆ",
                description: "A forbidden desire as a stepbrother helps with masturbation. A kinky secret!",
                externalUrl: "https://www.animehentaivideos.xxx/v/82151/my-stepbrother-admits-craving",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/18.jpg"
            },
            "video_elf_blindfolded": {
                title: "ðŸ§â€â™€ï¸ Elf Banging Night Elf: Blindfolded Kitchen Parody! ðŸ³",
                description: "A hilarious and kinky parody: elf banging night elf, blindfolded in the kitchen.",
                externalUrl: "https://www.animehentaivideos.xxx/v/34552/elf-banging-night-elf-blindfolded",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/04-1.jpg"
            },
            "video_tifa_lockhart_3d": {
                title: "ðŸŽ® Tifa Lockhart's Tight Fantasy: 3D Sex Gameplay! ðŸ’¥",
                description: "Damn! Tifa Lockhart delivers intense 3D sex gameplay action. A must-see!",
                externalUrl: "https://www.animehentaivideos.xxx/v/76524/damn-tifa-lockharts-tight",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/14.jpg"
            },
            "video_tifa_overwatch": {
                title: "ðŸ”« Tifa & Friends: Overwatch HMV Action! ï¿½",
                description: "Hey, wanna see Tifa and friends in wild Overwatch HMV action? Explosive!",
                externalUrl: "https://www.animehentaivideos.xxx/v/70203/hey-wanna-see-tifa-and-friends",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/10.jpg"
            },
            "video_milfs_penetrated": {
                title: "ðŸ”¥ MILFs Deeply Penetrated: Massive Cocks in Wild Hentai! ðŸ¤¯",
                description: "Mature ladies get intensely penetrated by massive cocks in wild hentai scenes.",
                externalUrl: "https://www.animehentaivideos.xxx/v/34976/milfs-deeply-penetrated-by-massive",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/02.jpg"
            },
            "video_anime_girls_twerking": {
                title: "ðŸ‘¯â€â™€ï¸ Anime Girls Twerking for Blowjob Action! ðŸ’–",
                description: "Watch as anime girls twerk their way to intense blowjob action. Hot!",
                externalUrl: "https://www.animehentaivideos.xxx/v/69949/anime-girls-twerking-for-blowjob",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/18-1.jpg"
            },
            "video_petite_asian_creampied": {
                title: "ðŸŒ¸ Petite Asian's First Creampie: Uncensored Hentai! ðŸ’¦",
                description: "A tight pussy gets creampied in her first uncensored hentai adventure. Intense!",
                externalUrl: "https://www.animehentaivideos.xxx/v/84012/petite-asians-tight-pussy-creampied",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/videoframe_78834.png"
            },
            "video_jill_valentine_doggystyle": {
                title: "ðŸ•â€ðŸ¦º MILF Slut Jill Valentine: Begs for Big Cock in Doggystyle! ðŸ¥µ",
                description: "Resident Evil's Jill Valentine gets wild, begging for big cock in doggystyle.",
                externalUrl: "https://www.animehentaivideos.xxx/v/82014/milf-slut-jill-valentine-begs",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/09-1.jpg"
            },
            "video_claire_jill_blowjob": {
                title: "ðŸ‘¯â€â™€ï¸ Claire & Jill: Resident Evil Hentai Blowjob! ðŸ†",
                description: "Yo, Claire and Jill deliver an uncensored blowjob in this Resident Evil hentai!",
                externalUrl: "https://www.animehentaivideos.xxx/v/82944/yo-claire-and-jill-blowjob-in",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/17.jpg"
            },
            "video_kanzaki_chan_creampie": {
                title: "ðŸ’– Kanzaki-chan's Unreal Blowjob & Creampie! ðŸ¤¤",
                description: "Obsessed with her slender, big-breasted body. Her blowjob before creampie is unreal!",
                externalUrl: "https://www.animehentaivideos.xxx/v/91745/im-obsessed-with-kanzaki-chans",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/13.jpg"
            },
            "video_pound_tight_asshole": {
                title: "ðŸ‘ Why Finger When I Can Pound Your Tight Asshole Hard? ðŸ’¥",
                description: "Forget fingering, it's time to pound that tight asshole hard. Intense action!",
                externalUrl: "https://www.animehentaivideos.xxx/v/74467/why-finger-when-i-can-pound-your",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/08.jpg"
            },
            "video_roommate_fucked": {
                title: "ðŸ¡ Home Alone: Roommate Fucked Me During Panty Teasing! ðŸ¤«",
                description: "A kinky surprise at home: roommate fucked me during panty teasing. Wild!",
                externalUrl: "https://www.animehentaivideos.xxx/v/72766/i-was-home-alone-when-my-roommate",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/19.jpg"
            },
            "video_shy_pianist": {
                title: "ðŸŽ¹ Shy Pianist: Rides Massive Cock in Tight Hole! ðŸ¥µ",
                description: "A shy pianist takes on a massive cock, riding deep in her tight hole. Intense!",
                externalUrl: "https://www.animehentaivideos.xxx/v/69503/shy-pianist-rides-a-massive-cock",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/05-1.jpg"
            },
            "video_huge_titted_cutie": {
                title: "ðŸ¤¯ Wow! Huge-Titted Cutie: Wild 3-Way Blowjob & Creampie! ðŸ’¦",
                description: "A stunning cutie delivers a wild 3-way blowjob and creampie. Unbelievable!",
                externalUrl: "https://www.animehentaivideos.xxx/v/68001/wow-huge-titted-cutie-in-wild",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/09-2.jpg"
            },
            "video_homemade_squirting": {
                title: "ðŸ’¦ Ever Seen Real Homemade Fingering & Squirting Like This? ðŸ¤©",
                description: "Witness authentic homemade fingering and explosive squirting. Uncensored!",
                externalUrl: "https://www.animehentaivideos.xxx/v/44574/ever-seen-real-homemade-fingering",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/09-3.jpg"
            },
            "video_uraraka_midoria": {
                title: "ðŸ’¥ Hentai Uraraka & Midoria: Steamy Anime Action! ðŸ’–",
                description: "My Hero Academia's Uraraka and Midoria in a steamy, action-packed hentai scene.",
                externalUrl: "https://www.animehentaivideos.xxx/v/95189/hentai-uraraka-and-midoria-in",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/02-1.jpg"
            },
            "video_madre_e_hijo": {
                title: "ðŸ‘©â€ðŸ‘¦ Madre E Hijo: Steamy Hentai Creampie Action! ðŸ’¦",
                description: "A forbidden bond in steamy hentai creampie action. Intense and shocking!",
                externalUrl: "https://www.animehentaivideos.xxx/v/43270/madre-e-hijo-in-steamy-hentai",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/06.jpg"
            },
            "video_wet_doggystyle": {
                title: "ðŸ¶ What's Hotter? Steamy, Wet Doggystyle in Anime! ðŸ¥µ",
                description: "Dive into a steamy, wet doggystyle session in anime. Pure raw passion!",
                externalUrl: "https://www.animehentaivideos.xxx/v/72376/whats-hotter-than-a-steamy-wet",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/13-1.jpg"
            },
            "video_bbw_cuckold": {
                title: "ðŸ‘ 3D BBW Hot Mature: Cuckold Sex with BBC Creampie! ðŸ†",
                description: "A hot mature BBW engages in cuckold sex with a big black cock for an intense creampie.",
                externalUrl: "https://www.animehentaivideos.xxx/v/92169/3d-bbw-hot-mature-engages-in-cuckold",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/05/19-1.jpg"
            },
            "video_sissy_ladyboy": {
                title: "ðŸ’… Sissy Ladyboy: Devours Ass in Wild Trans Threesome! ðŸ’–",
                description: "A sissy ladyboy gets wild, devouring ass while being banged in a trans threesome group.",
                externalUrl: "https://www.animehentaivideos.xxx/v/91291/sissy-ladyboy-devours-ass-while",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/17-1.jpg"
            },
            "video_friends_girlfriend": {
                title: "ðŸ¤« Stuffing My Friend's Girlfriend's Tight Vagina! ðŸ’¦",
                description: "A wild night of fucking leads to stuffing a friend's girlfriend's tight vagina with cum.",
                externalUrl: "https://www.animehentaivideos.xxx/v/66886/stuffing-my-friends-girlfriends",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/19-2.jpg"
            },
            "video_brickzilla_freya": {
                title: "ðŸ¦ Brickzilla's BBC Dominates Freya Von Doom! ðŸ’¥",
                description: "Brickzilla's massive BBC takes on Freya Von Doom's petite frame. Intense domination!",
                externalUrl: "https://www.blacksexvideos.xxx/v/27905/brickzillas-bbc-dominates-freya",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/02-2.jpg"
            },
            "video_black_beauty_boss": {
                title: "ðŸ‘‘ Black Beauty: Boss's Cock in Her Mouth! ðŸ¥µ",
                description: "A stunning black beauty gets her boss's cock in her mouth. Forbidden office fantasy!",
                externalUrl: "https://www.blacksexvideos.xxx/v/60000/black-beauty-gets-her-bosss",
                thumbnail: "http://luxflix.free.nf/wp-content/uploads/2025/07/15.jpg"
            }
        };

        // --- Access Check Logic ---
        async function checkUserAccess() {
            verifyingAccess.classList.remove('hidden');
            proContent.classList.add('hidden');
            accessDenied.classList.add('hidden');
            logoutButton.classList.add('hidden');
            pageTitle.textContent = "Verifying Access...";

            const user = auth.currentUser;

            if (user) {
                console.log("User logged in:", user.uid);
                // Check if logoutButton exists before adding event listener
                if (logoutButton) { 
                    logoutButton.classList.remove('hidden'); // Show logout button if logged in
                }

                try {
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    if (userDoc.exists && userDoc.data().unlocked_access) {
                        const subscriptionEndDate = userDoc.data().subscriptionEndDate;
                        // Check if subscriptionEndDate exists and is a future date
                        if (subscriptionEndDate && subscriptionEndDate.toDate() > new Date()) {
                            // User has unlocked access and subscription is active
                            proContent.classList.remove('hidden');
                            verifyingAccess.classList.add('hidden');
                            pageTitle.textContent = "Exclusive Pro Videos";
                            console.log("User has Pro Access.");
                            renderVideoCards(); // Render videos only if access is granted
                        } else {
                            // Access expired or not set correctly
                            accessDenied.classList.remove('hidden');
                            verifyingAccess.classList.add('hidden');
                            pageTitle.textContent = "Access Denied!";
                            console.log("User's Pro Access is expired or not active.");
                            // Optionally, revoke access in Firestore if expired
                            // db.collection('users').doc(user.uid).update({ unlocked_access: false });
                        }
                    } else {
                        // User document doesn't exist or unlocked_access is false
                        accessDenied.classList.remove('hidden');
                        verifyingAccess.classList.add('hidden');
                        pageTitle.textContent = "Access Denied!";
                        console.log("User does not have Pro Access (document missing or flag false).");
                    }
                } catch (error) {
                    console.error("Error fetching user access status:", error);
                    accessDenied.classList.remove('hidden'); // Show denied on error
                    verifyingAccess.classList.add('hidden');
                    pageTitle.textContent = "Access Denied!";
                    alert("Error checking access. Please try again later.");
                }
            } else {
                // No user logged in
                accessDenied.classList.remove('hidden');
                verifyingAccess.classList.add('hidden');
                pageTitle.textContent = "Access Denied!";
                console.log("No user logged in. Redirecting to login/home.");
                // Optional: Redirect to login page if not logged in
                // window.location.href = 'login.html'; 
            }
        }

        // --- Render Video Cards Function ---
        function renderVideoCards() {
            videoGrid.innerHTML = ''; // Clear existing content
            for (const videoId in videoData) {
                const video = videoData[videoId];
                const card = document.createElement('div');
                card.className = 'video-card';
                // IMPORTANT CHANGE: Redirect directly to externalUrl
                card.onclick = () => {
                    window.open(video.externalUrl, '_blank'); // Open in new tab
                };
                card.innerHTML = `
                    <img src="${video.thumbnail}" alt="${video.title} Thumbnail" onerror="this.onerror=null;this.src='https://placehold.co/400x180/333/ffffff?text=Video+Thumbnail+Error';" >
                    <div class="video-card-content">
                        <h3>${video.title}</h3>
                        <p>${video.description}</p>
                    </div>
                `;
                videoGrid.appendChild(card);
            }
        }

        // --- Logout Logic ---
        // Add null check here as well to be safe
        if (logoutButton) { 
            logoutButton.addEventListener('click', async () => {
                try {
                    await auth.signOut();
                    console.log("User logged out.");
                    // Redirect or update UI after logout
                    window.location.href = 'index.html'; // Redirect to home page
                } catch (error) {
                    console.error("Error logging out:", error);
                    alert("Error logging out. Please try again.");
                }
            });
        }

        // Listen for Firebase Auth state changes
        auth.onAuthStateChanged(user => {
            checkUserAccess(); // Re-check access whenever auth state changes
        });

        // Initial check on page load (redundant with onAuthStateChanged but harmless)
        document.addEventListener('DOMContentLoaded', checkUserAccess);
    </script>
</body>
</html>
ï¿½