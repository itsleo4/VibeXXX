<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>VibeXXX - Login</title>
    <!-- Link to your custom CSS for base styles -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <!-- Tailwind CSS CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
        /* Custom styles to enhance Tailwind and ensure full page height for centering */
        body {
            /* Ensure body takes full viewport height and uses Inter font */
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            background-color: #111; /* Dark background */
            color: #fff; /* White text */
            display: flex;
            flex-direction: column; /* Allows header/footer to be at top/bottom, main content to stretch */
            margin: 0; /* Remove default body margin */
        }
        /* Flexbox for centering the main content */
        .main-content-wrapper {
            flex-grow: 1; /* Allows this wrapper to take available vertical space */
            display: flex;
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            padding: 1rem; /* Add some padding around the form */
        }
        /* Auth form container styling */
        .auth-container {
            background: #1a1a1a; /* Darker background for the form */
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 51, 102, 0.5); /* Stronger, pink glow */
            text-align: center;
            padding: 2.5rem; /* Increased padding */
            max-width: 450px; /* Slightly wider form */
            width: 100%; /* Ensure responsiveness */
            border: 1px solid #ff3366; /* Subtle pink border */
        }
        .auth-container h2 {
            color: #ff3366; /* Pink heading */
            margin-bottom: 1.5rem; /* More space below heading */
            font-size: 2.25rem; /* Larger heading */
            font-weight: 700; /* Bold */
        }
        .auth-container form input {
            background: #2d2d2d; /* Darker input background */
            border: 1px solid #444; /* Subtle border */
            color: #fff;
            padding: 0.9rem 1.2rem; /* More padding for inputs */
            border-radius: 10px; /* More rounded inputs */
            font-size: 1.1rem; /* Larger font in inputs */
            transition: all 0.3s ease; /* Smooth transitions */
        }
        .auth-container form input:focus {
            outline: none;
            border-color: #ff1493; /* Pink border on focus */
            box-shadow: 0 0 0 4px rgba(255, 20, 147, 0.4); /* Pink glow on focus */
        }
        .auth-container form button {
            /* Gradient button with hover effects */
            background: linear-gradient(to right, #ff1493, #ff416c);
            border: none;
            border-radius: 10px; /* Rounded button */
            font-size: 1.2rem; /* Larger font */
            font-weight: bold;
            color: #fff;
            cursor: pointer;
            padding: 0.9rem 1.5rem; /* Generous padding */
            margin-top: 1.5rem; /* More space above button */
            transition: all 0.3s ease; /* Smooth transitions */
            box-shadow: 0 4px 15px rgba(255, 65, 108, 0.4); /* Initial button shadow */
        }
        .auth-container form button:hover {
            background: linear-gradient(to right, #ff416c, #ff1493); /* Reverse gradient on hover */
            transform: translateY(-3px); /* Lift effect */
            box-shadow: 0 8px 20px rgba(255, 65, 108, 0.6); /* Stronger shadow on hover */
        }
        .auth-container p {
            color: #bbb; /* Lighter grey text */
            margin-top: 1.5rem;
            font-size: 1rem;
        }
        .auth-container a {
            color: #ff4da6;
            text-decoration: none; /* No underline by default */
            font-weight: 600; /* Semi-bold */
            transition: color 0.3s ease;
        }
        .auth-container a:hover {
            color: #ff1493;
            text-decoration: underline; /* Underline on hover */
        }
        /* Header styling from index.html for consistency */
        header {
            background-color: #1a1a1a;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            width: 100%; /* Ensure header spans full width */
        }
        .logo {
            font-size: 1.8rem;
            color: #fff;
        }
        .logo span {
            color: #ff3366;
        }
        .menu {
            list-style: none;
            display: flex;
            gap: 1.5rem;
            margin: 0; /* Remove default ul margin */
            padding: 0; /* Remove default ul padding */
        }
        .menu a {
            color: #fff;
            text-decoration: none;
            transition: 0.3s;
            padding: 0.5rem 0.8rem; /* Add padding for better click area */
            border-radius: 8px; /* Rounded links */
        }
        .menu a:hover {
            color: #ff3366;
            background-color: rgba(255, 51, 102, 0.1); /* Subtle background on hover */
        }
    </style>
</head>
<body>
    <header>
        <h1 class="logo">Vibe<span>XXX</span></h1>
        <nav>
            <ul class="menu">
                <li><a href="index.html">Free Videos</a></li>
                <!-- For register/login pages, these links are static -->
                <li><a href="login.html">Login</a></li>
                <li><a href="register.html">Register</a></li>
            </ul>
        </nav>
    </header>

    <div class="main-content-wrapper">
        <div class="auth-container">
            <h2>Login</h2>
            <form id="loginForm" class="space-y-4">
                <input type="email" id="loginEmail" name="loginEmail" placeholder="Email" required class="w-full" />
                <input type="password" id="loginPassword" name="loginPassword" placeholder="Password" required class="w-full" />
                <button type="submit" class="w-full">Login</button>
            </form>
            <p>Don't have an account? <a href="register.html">Register here</a></p>
        </div>
    </div>

    <!-- Custom Modal HTML (same as in index.html and auth.js) -->
    <div id="customModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-900 p-8 rounded-xl shadow-2xl max-w-sm w-full text-center border border-pink-600 transform scale-95 transition-transform duration-300 ease-out">
            <p id="modalMessage" class="text-white text-xl mb-6 font-semibold"></p>
            <button
                onclick="window.hideModal()"
                class="bg-pink-700 hover:bg-pink-800 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-75"
            >
                Close
            </button>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>
    <!-- Expose global variables for Firebase config -->
    <script>
        window.__firebase_config = typeof __firebase_config !== 'undefined' ? __firebase_config : '{}';
        window.__app_id = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        window.__initial_auth_token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
    </script>
    <!-- Your auth.js script and page-specific logic -->
    <script type="module">
        import { loginUser, showModal, hideModal } from './js/auth.js'; // Adjust path if necessary
        window.showModal = showModal; // Expose globally
        window.hideModal = hideModal; // Expose globally

        document.addEventListener('DOMContentLoaded', () => {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const email = document.getElementById('loginEmail').value.trim();
                    const password = document.getElementById('loginPassword').value;

                    if (!email || !password) {
                        window.showModal("Please enter email and password.");
                        return;
                    }

                    const success = await loginUser(email, password);
                    if (success) {
                        window.location.href = 'index.html'; // Redirect only if login was successful
                    }
                });
            }
        });
    </script>
</body>
</html>
